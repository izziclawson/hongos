<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>üçÑ Shroomies Dose Calculator</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 700px;
      margin: 2rem auto;
      padding: 1rem;
      background: #1e1e1e;
      color: #eee;
      transition: background 0.3s, color 0.3s;
    }
    h1, h3 { text-align: center; color: #90ee90; }
    .section { margin: 1.5rem 0; }
    label { display: block; margin-bottom: 0.5rem; font-weight: bold; }
    select, input, button {
      width: 100%;
      padding: 0.75rem;
      margin-bottom: 1rem;
      background: #2b2b2b;
      border: 1px solid #444;
      color: #eee;
      border-radius: 8px;
      font-size: 1rem;
    }
    button {
      background: #4caf50;
      color: white;
      border: none;
      cursor: pointer;
      border-radius: 8px;
    }
    button:hover { background: #45a049; }
    .result {
      background: #2b2b2b;
      border: 1px solid #444;
      padding: 1rem;
      border-radius: 8px;
    }
    .advice { margin-top: 1rem; }
    .footer {
      margin-top: 2rem;
      text-align: center;
      font-size: 0.9rem;
      color: #aaa;
    }
    .toggle { display: inline-block; margin: 0 0.5rem; cursor: pointer; }

    /* Toggle switch for weight units */
    .switch {
      position: relative;
      display: inline-block;
      width: 60px;
      height: 34px;
      margin: 0 10px;
    }
    .switch input { opacity: 0; width: 0; height: 0; }
    .slider {
      position: absolute;
      cursor: pointer;
      top: 0; left: 0; right: 0; bottom: 0;
      background-color: #ccc;
      transition: .4s;
      border-radius: 34px;
    }
    .slider:before {
      position: absolute;
      content: "";
      height: 26px;
      width: 26px;
      left: 4px;
      bottom: 4px;
      background-color: white;
      transition: .4s;
      border-radius: 50%;
    }
    input:checked + .slider { background-color: #4caf50; }
    input:checked + .slider:before { transform: translateX(26px); }
    .unit-label {
      display: inline-block;
      font-weight: bold;
      margin: 0 5px;
    }
    .active-unit { color: #90ee90; }

    /* Light mode with light green background */
    body.light {
      background: #e6f7e6;
      color: #222;
    }
    body.light select,
    body.light input,
    body.light .result {
      background: #fff;
      color: #222;
      border: 1px solid #ccc;
    }
    body.light button {
      background: #0077cc;
    }
    body.light h1, body.light h3 {
      color: #0077cc;
    }
  </style>
</head>
<body>
  <h1>üçÑ Shroomies Dose Calculator</h1>
  <div style="text-align:center; margin-bottom:1rem;">
    <span class="toggle" onclick="setLanguage('en')">üá∫üá∏ English</span> | 
    <span class="toggle" onclick="setLanguage('es')">üáµüá∑ Espa√±ol</span> | 
    <span class="toggle" onclick="toggleTheme()">üåì Theme</span>
  </div>

  <div class="section">
    <label id="weightLabel">Body Weight</label>
    <input type="number" id="weight" placeholder="Enter your weight">
    <div style="display: flex; align-items: center; justify-content: center;">
      <span id="kgLabel" class="unit-label active-unit">kg</span>
      <label class="switch">
        <input type="checkbox" id="unitToggle" onchange="toggleUnit()">
        <span class="slider"></span>
      </label>
      <span id="lbLabel" class="unit-label">lb</span>
    </div>
  </div>

  <div class="section">
    <label id="strainLabel">Strain</label>
    <select id="strain">
      <option value="mild">Mild (low potency)</option>
      <option value="standard">Standard (average potency)</option>
      <option value="strong">Strong (high potency)</option>
      <optgroup label="Specific strains">
        <option value="puerto rican">Puerto Rican</option>
        <option value="golden teacher">Golden Teacher</option>
        <option value="b+">B+</option>
        <option value="mazatapec">Mazatapec</option>
        <option value="amazonian">Amazonian</option>
        <option value="malabar">Malabar</option>
        <option value="thai">Thai</option>
        <option value="cambodian">Cambodian</option>
        <option value="ecuadorian">Ecuadorian</option>
        <option value="hawaiian">Hawaiian</option>
        <option value="treasure coast">Treasure Coast</option>
        <option value="penis envy">Penis Envy</option>
        <option value="albino penis envy">Albino Penis Envy</option>
        <option value="blue meanie">Blue Meanie</option>
        <option value="melmac">Melmac</option>
        <option value="z-strain">Z-Strain</option>
        <option value="mckennaii">McKennaii</option>
        <option value="tidal wave">Tidal Wave</option>
        <option value="ape">APE (Albino Penis Envy)</option>
        <option value="jack frost">Jack Frost</option>
        <option value="natalensis">Natalensis</option>
      </optgroup>
    </select>
  </div>

  <div class="section">
    <label id="effectLabel">Effect Level</label>
    <select id="effect">
      <option value="micro">Microdose</option>
      <option value="light">Light</option>
      <option value="common">Common</option>
      <option value="strong">Strong</option>
      <option value="heroic">Heroic</option>
    </select>
  </div>

  <div class="section">
    <label id="formLabel">Mushroom Form</label>
    <select id="form">
      <option value="dried">Dried mushrooms</option>
      <option value="fresh">Fresh mushrooms</option>
      <option value="truffles">Truffles</option>
    </select>
  </div>

  <button onclick="calculateDose()">Calculate Dose</button>

  <div id="output" class="result" style="display:none;"></div>

  <div class="footer">
    üçÑ Shroomies Calculator | For educational purposes only<br>
    Always research thoroughly and prioritize safety
  </div>

  <script>
    // Potency (mg psilocybin / g dried)
    const STRAIN_POTENCIES = {
      "puerto rican": 7.0,
      "golden teacher": 6.0,
      "b+": 5.5,
      "mazatapec": 6.5,
      "amazonian": 7.0,
      "malabar": 5.0,
      "thai": 6.0,
      "cambodian": 6.0,
      "ecuadorian": 6.5,
      "hawaiian": 5.5,
      "treasure coast": 6.0,
      "penis envy": 11.0,
      "albino penis envy": 12.0,
      "blue meanie": 9.0,
      "melmac": 10.0,
      "z-strain": 6.5,
      "mckennaii": 7.0,
      "tidal wave": 10.0,
      "ape": 12.5,
      "jack frost": 11.0,
      "natalensis": 8.0
    };

    // Experience dose guidelines (grams dried, average strain, 70kg person)
    const BASE_DOSES = {
      micro: 0.2,
      light: 1.0,
      common: 2.0,
      strong: 3.5,
      heroic: 5.0
    };

    // Form multipliers
    const FORM_MULTIPLIER = {
      dried: 1.0,
      fresh: 10.0,   // fresh mushrooms ~10x heavier than dried
      truffles: (10 / 3.5) // adjust so a "strong" dose = ~10g truffles instead of 3.5
    };

    // Language translations - Puerto Rican Spanish
    const TRANSLATIONS = {
      en: {
        weight: "Body Weight",
        strain: "Strain",
        effect: "Effect Level",
        form: "Mushroom Form",
        micro: "Microdose",
        light: "Light",
        common: "Common",
        strong: "Strong",
        heroic: "Heroic",
        dried: "Dried mushrooms",
        fresh: "Fresh mushrooms",
        truffles: "Truffles",
        advice: "Additional Advice",
        recommended: "Recommended Dose",
        of: "of",
        startTime: "Start time:",
        duration: "Duration:",
        setting: "Setting:",
        integration: "Integration:",
        safety: "Safety:",
        effectsBegin: "Effects typically begin 20‚Äì60 minutes after consumption",
        hours: "6‚Äì10 hours",
        settingText: "Ensure you're in a safe, comfortable environment",
        integrationText: "Consider journaling afterwards",
        safetyText: "Start low if inexperienced, have a trusted person nearby, stay hydrated, avoid risky combinations",
        disclaimer: "For educational purposes only. Always research thoroughly and prioritize safety"
      },
      es: {
        weight: "Peso Corporal",
        strain: "Variedad",
        effect: "Nivel de Efecto",
        form: "Forma de Hongos",
        micro: "Microdosis",
        light: "Leve",
        common: "Com√∫n",
        strong: "Fuerte",
        heroic: "Heroico",
        dried: "Hongos secos",
        fresh: "Hongos frescos",
        truffles: "Trufas",
        advice: "Consejos Adicionales",
        recommended: "Dosis Recomendada",
        of: "de",
        startTime: "Tiempo de inicio:",
        duration: "Duraci√≥n:",
        setting: "Ambiente:",
        integration: "Integraci√≥n:",
        safety: "Seguridad:",
        effectsBegin: "Los efectos suelen comenzar entre 20 y 60 minutos despu√©s del consumo",
        hours: "6‚Äì10 horas",
        settingText: "Aseg√∫rate de estar en un ambiente seguro y c√≥modo",
        integrationText: "Considera escribir un diario despu√©s de la experiencia",
        safetyText: "Comienza con dosis bajas si eres inexperto, ten a alguien de confianza cerca, mantente hidratado, evita combinaciones riesgosas",
        disclaimer: "Solo con fines educativos. Investiga bien y prioriza tu seguridad siempre"
      }
    };

    let currentLang = "en";
    let currentUnit = "kg";

    function toggleUnit() {
      const toggle = document.getElementById("unitToggle");
      const kgLabel = document.getElementById("kgLabel");
      const lbLabel = document.getElementById("lbLabel");
      
      if (toggle.checked) {
        currentUnit = "lb";
        kgLabel.classList.remove("active-unit");
        lbLabel.classList.add("active-unit");
      } else {
        currentUnit = "kg";
        kgLabel.classList.add("active-unit");
        lbLabel.classList.remove("active-unit");
      }
    }

    function setLanguage(lang) {
      currentLang = lang;
      document.getElementById("weightLabel").innerText = TRANSLATIONS[lang].weight;
      document.getElementById("strainLabel").innerText = TRANSLATIONS[lang].strain;
      document.getElementById("effectLabel").innerText = TRANSLATIONS[lang].effect;
      document.getElementById("formLabel").innerText = TRANSLATIONS[lang].form;

      const effect = document.getElementById("effect");
      effect.options[0].text = TRANSLATIONS[lang].micro;
      effect.options[1].text = TRANSLATIONS[lang].light;
      effect.options[2].text = TRANSLATIONS[lang].common;
      effect.options[3].text = TRANSLATIONS[lang].strong;
      effect.options[4].text = TRANSLATIONS[lang].heroic;

      const form = document.getElementById("form");
      form.options[0].text = TRANSLATIONS[lang].dried;
      form.options[1].text = TRANSLATIONS[lang].fresh;
      form.options[2].text = TRANSLATIONS[lang].truffles;
      
      // Update footer text
      document.querySelector(".footer").innerHTML = `üçÑ Shroomies Calculator | ${TRANSLATIONS[lang].disclaimer}`;
    }

    function toggleTheme() {
      document.body.classList.toggle("light");
    }

    function calculateDose() {
      let weight = parseFloat(document.getElementById("weight").value);
      let strain = document.getElementById("strain").value;
      let effect = document.getElementById("effect").value;
      let form = document.getElementById("form").value;

      // Convert weight to kg if needed
      if (currentUnit === "lb") weight = weight * 0.453592;

      // base grams for 70kg at average potency
      let base = BASE_DOSES[effect];
      let dose = base * (weight / 70);

      // adjust for strain potency if chosen
      if (strain in STRAIN_POTENCIES) {
        let ratio = 6.0 / STRAIN_POTENCIES[strain]; // normalize vs avg 6mg/g
        dose = dose * ratio;
      } else if (strain === "mild") {
        dose *= 1.2;
      } else if (strain === "strong") {
        dose *= 0.8;
      }

      // adjust for form
      dose *= FORM_MULTIPLIER[form];

      const output = document.getElementById("output");
      output.style.display = "block";
      output.innerHTML = `
        <h3>${TRANSLATIONS[currentLang].recommended}</h3>
        <p><strong>${dose.toFixed(2)} g</strong> ${TRANSLATIONS[currentLang].of} ${TRANSLATIONS[currentLang][form]} <em>${strain}</em></p>
        <p><em>${TRANSLATIONS[currentLang][effect]}</em> ${TRANSLATIONS[currentLang].effect}</p>
        <details class="advice">
          <summary>${TRANSLATIONS[currentLang].advice}</summary>
          <p><strong>${TRANSLATIONS[currentLang].startTime}</strong> ${TRANSLATIONS[currentLang].effectsBegin}<br>
          <strong>${TRANSLATIONS[currentLang].duration}</strong> ${TRANSLATIONS[currentLang].hours}<br>
          <strong>${TRANSLATIONS[currentLang].setting}</strong> ${TRANSLATIONS[currentLang].settingText}<br>
          <strong>${TRANSLATIONS[currentLang].integration}</strong> ${TRANSLATIONS[currentLang].integrationText}<br>
          <strong>${TRANSLATIONS[currentLang].safety}</strong> ${TRANSLATIONS[currentLang].safetyText}</p>
        </details>
      `;
    }
  </script>
</body>
</html>
